(()=>{"use strict";const e=JSON.parse('[{"key":"`","code":"Backquote","shift":"~","shiftCaps":"~"},{"key":"1","code":"Digit1","shift":"!","shiftCaps":"!"},{"key":"2","code":"Digit2","shift":"@","shiftCaps":"@"},{"key":"3","code":"Digit3","shift":"#","shiftCaps":"#"},{"key":"4","code":"Digit4","shift":"$","shiftCaps":"$"},{"key":"5","code":"Digit5","shift":"%","shiftCaps":"%"},{"key":"6","code":"Digit6","shift":"^","shiftCaps":"^"},{"key":"7","code":"Digit7","shift":"&","shiftCaps":"&"},{"key":"8","code":"Digit8","shift":"*","shiftCaps":"*"},{"key":"9","code":"Digit9","shift":"(","shiftCaps":"("},{"key":"0","code":"Digit0","shift":")","shiftCaps":")"},{"key":"-","code":"Minus","shift":"_","shiftCaps":"_"},{"key":"=","code":"Equal","shift":"+","shiftCaps":"+"},{"key":"Backspace","code":"Backspace"},{"key":"Tab","code":"Tab"},{"key":"q","code":"KeyQ","caps":"Q","shift":"Q","shiftCaps":"q"},{"key":"w","code":"KeyW","caps":"W","shift":"W","shiftCaps":"w"},{"key":"e","code":"KeyE","caps":"E","shift":"E","shiftCaps":"e"},{"key":"r","code":"KeyR","caps":"R","shift":"R","shiftCaps":"r"},{"key":"t","code":"KeyT","caps":"T","shift":"T","shiftCaps":"t"},{"key":"y","code":"KeyY","caps":"Y","shift":"Y","shiftCaps":"y"},{"key":"u","code":"KeyU","caps":"U","shift":"U","shiftCaps":"u"},{"key":"i","code":"KeyI","caps":"I","shift":"I","shiftCaps":"i"},{"key":"o","code":"KeyO","caps":"O","shift":"O","shiftCaps":"o"},{"key":"p","code":"KeyP","caps":"P","shift":"P","shiftCaps":"p"},{"key":"[","code":"BracketLeft","shift":"{","shiftCaps":"{"},{"key":"]","code":"BracketRight","shift":"}","shiftCaps":"}"},{"key":"\\\\","code":"Backslash","shift":"|","shiftCaps":"|"},{"key":"Del","code":"Delete"},{"key":"CapsLock","code":"CapsLock"},{"key":"a","code":"KeyA","caps":"A","shift":"A","shiftCaps":"a"},{"key":"s","code":"KeyS","caps":"S","shift":"S","shiftCaps":"s"},{"key":"d","code":"KeyD","caps":"D","shift":"D","shiftCaps":"d"},{"key":"f","code":"KeyF","caps":"F","shift":"F","shiftCaps":"f"},{"key":"g","code":"KeyG","caps":"G","shift":"G","shiftCaps":"g"},{"key":"h","code":"KeyH","caps":"H","shift":"H","shiftCaps":"h"},{"key":"j","code":"KeyJ","caps":"J","shift":"J","shiftCaps":"j"},{"key":"k","code":"KeyK","caps":"K","shift":"K","shiftCaps":"k"},{"key":"l","code":"KeyL","caps":"L","shift":"L","shiftCaps":"l"},{"key":";","code":"Semicolon","shift":":","shiftCaps":":"},{"key":"\'","code":"Quote","shift":"\\"","shiftCaps":"\\""},{"key":"Enter","code":"Enter"},{"key":"Shift","code":"ShiftLeft"},{"key":"z","code":"KeyZ","caps":"Z","shift":"Z","shiftCaps":"z"},{"key":"x","code":"KeyX","caps":"X","shift":"X","shiftCaps":"x"},{"key":"c","code":"KeyC","caps":"C","shift":"C","shiftCaps":"c"},{"key":"v","code":"KeyV","caps":"V","shift":"V","shiftCaps":"v"},{"key":"b","code":"KeyB","caps":"B","shift":"B","shiftCaps":"b"},{"key":"n","code":"KeyN","caps":"N","shift":"N","shiftCaps":"n"},{"key":"m","code":"KeyM","caps":"M","shift":"M","shiftCaps":"m"},{"key":",","code":"Comma","shift":"<","shiftCaps":"<"},{"key":".","code":"Period","shift":">","shiftCaps":">"},{"key":"/","code":"Slash","shift":"?","shiftCaps":"?"},{"key":"&#9650;","code":"ArrowUp"},{"key":"Shift","code":"ShiftRight"},{"key":"Ctrl","code":"ControlLeft"},{"key":"Win","code":"MetaLeft"},{"key":"Alt","code":"AltLeft"},{"key":" ","code":"Space"},{"key":"Alt","code":"AltRight"},{"key":"&#9668;","code":"ArrowLeft"},{"key":"&#9660;","code":"ArrowDown"},{"key":"&#9658;","code":"ArrowRight"},{"key":"Ctrl","code":"ControlRight"}]'),t=JSON.parse('[{"key":"ё","code":"Backquote","caps":"Ё","shift":"Ё","shiftCaps":"ё"},{"key":"1","code":"Digit1","shift":"!","shiftCaps":"!"},{"key":"2","code":"Digit2","shift":"\\"","shiftCaps":"\\""},{"key":"3","code":"Digit3","shift":"№","shiftCaps":"№"},{"key":"4","code":"Digit4","shift":";","shiftCaps":";"},{"key":"5","code":"Digit5","shift":"%","shiftCaps":"%"},{"key":"6","code":"Digit6","shift":":","shiftCaps":":"},{"key":"7","code":"Digit7","shift":"?","shiftCaps":"?"},{"key":"8","code":"Digit8","shift":"*","shiftCaps":"*"},{"key":"9","code":"Digit9","shift":"(","shiftCaps":"("},{"key":"0","code":"Digit0","shift":")","shiftCaps":")"},{"key":"-","code":"Minus","shift":"_","shiftCaps":"_"},{"key":"=","code":"Equal","shift":"+","shiftCaps":"+"},{"key":"Backspace","code":"Backspace"},{"key":"Tab","code":"Tab"},{"key":"й","code":"KeyQ","caps":"Й","shift":"Й","shiftCaps":"й"},{"key":"ц","code":"KeyW","caps":"Ц","shift":"Ц","shiftCaps":"ц"},{"key":"у","code":"KeyE","caps":"У","shift":"У","shiftCaps":"у"},{"key":"к","code":"KeyR","caps":"К","shift":"К","shiftCaps":"к"},{"key":"е","code":"KeyT","caps":"Е","shift":"Е","shiftCaps":"е"},{"key":"н","code":"KeyY","caps":"Н","shift":"Н","shiftCaps":"н"},{"key":"г","code":"KeyU","caps":"Г","shift":"Г","shiftCaps":"г"},{"key":"ш","code":"KeyI","caps":"Ш","shift":"Ш","shiftCaps":"ш"},{"key":"щ","code":"KeyO","caps":"Щ","shift":"Щ","shiftCaps":"щ"},{"key":"з","code":"KeyP","caps":"З","shift":"З","shiftCaps":"з"},{"key":"х","code":"BracketLeft","caps":"Х","shift":"Х","shiftCaps":"х"},{"key":"ъ","code":"BracketRight","caps":"Ъ","shift":"Ъ","shiftCaps":"ъ"},{"key":"\\\\","code":"Backslash","shift":"/","shiftCaps":"/"},{"key":"Del","code":"Delete"},{"key":"CapsLock","code":"CapsLock"},{"key":"ф","code":"KeyA","caps":"Ф","shift":"Ф","shiftCaps":"ф"},{"key":"ы","code":"KeyS","caps":"Ы","shift":"Ы","shiftCaps":"ы"},{"key":"в","code":"KeyD","caps":"В","shift":"в"},{"key":"а","code":"KeyF","caps":"А","shift":"А","shiftCaps":"а"},{"key":"п","code":"KeyG","caps":"П","shift":"П","shiftCaps":"п"},{"key":"р","code":"KeyH","caps":"Р","shift":"Р","shiftCaps":"р"},{"key":"о","code":"KeyJ","caps":"О","shift":"О","shiftCaps":"о"},{"key":"л","code":"KeyK","caps":"Л","shift":"Л","shiftCaps":"л"},{"key":"д","code":"KeyL","caps":"Д","shift":"Д","shiftCaps":"д"},{"key":"ж","code":"Semicolon","caps":"Ж","shift":"Ж","shiftCaps":"ж"},{"key":"э","code":"Quote","caps":"Э","shift":"Э","shiftCaps":"э"},{"key":"Enter","code":"Enter"},{"key":"Shift","code":"ShiftLeft"},{"key":"я","code":"KeyZ","caps":"Я","shift":"Я","shiftCaps":"я"},{"key":"ч","code":"KeyX","caps":"Ч","shift":"Ч","shiftCaps":"ч"},{"key":"с","code":"KeyC","caps":"С","shift":"С","shiftCaps":"с"},{"key":"м","code":"KeyV","caps":"М","shift":"М","shiftCaps":"м"},{"key":"и","code":"KeyB","caps":"И","shift":"И","shiftCaps":"и"},{"key":"т","code":"KeyN","caps":"Т","shift":"Т","shiftCaps":"т"},{"key":"ь","code":"KeyM","caps":"Ь","shift":"Ь","shiftCaps":"ь"},{"key":"б","code":"Comma","caps":"Б","shift":"Б","shiftCaps":"б"},{"key":"ю","code":"Period","caps":"Ю","shift":"Ю","shiftCaps":"ю"},{"key":".","code":"Slash","shift":",","shiftCaps":","},{"key":"&#9650;","code":"ArrowUp"},{"key":"Shift","code":"ShiftRight"},{"key":"Ctrl","code":"ControlLeft"},{"key":"Win","code":"MetaLeft"},{"key":"Alt","code":"AltLeft"},{"key":" ","code":"Space"},{"key":"Alt","code":"AltRight"},{"key":"&#9668;","code":"ArrowLeft"},{"key":"&#9660;","code":"ArrowDown"},{"key":"&#9658;","code":"ArrowRight"},{"key":"Ctrl","code":"ControlRight"}]');document.querySelector("body").insertAdjacentHTML("afterbegin",'<div class="wrapper">\n\t\t<h1 class="main-header"> RSS virtual keyboard </h1>\n\t\t<textarea class="text-area" type="text"></textarea>\n\t</div>');const s=document.querySelector(".wrapper");s.insertAdjacentHTML("beforeend",((e,t)=>{let s='<section class="keyboard"><div class="keyboard__row">';return e.forEach(((e,i)=>{const a=t[i];s+=`<div class="keyboard__key" id="${e.code}">\n\t\t\t\t\t<span class="ru"> \n\t\t\t\t\t\t<span class="caseDown">${a.key}</span>\n\t\t\t\t\t\t<span class="caseUp hidden">${a.shift?a.shift:a.key}</span>\n\t\t\t\t\t\t<span class="caps hidden">${a.caps?a.caps:a.key}</span>\n\t\t\t\t\t\t<span class="shiftCaps hidden">${a.shiftCaps?a.shiftCaps:a.key}</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="en"> \n\t\t\t\t\t\t<span class="caseDown">${e.key}</span>\n\t\t\t\t\t\t<span class="caseUp hidden">${e.shift?e.shift:e.key}</span>\n\t\t\t\t\t\t<span class="caps hidden">${e.caps?e.caps:e.key}</span>\n\t\t\t\t\t\t<span class="shiftCaps hidden">${e.shiftCaps?e.shiftCaps:e.key}</span>\n\t\t\t\t\t</span>\n\t\t\t</div>`,"Backspace"!==e.code&&"Delete"!==e.code&&"Enter"!==e.code&&"ShiftRight"!==e.code&&"ControlRight"!==e.code||(s+='</div><div class="keyboard__row">')})),s+"</section>"})(e,t)),s.insertAdjacentHTML("beforeend",'<p class="keyboard-info"> \n\t\tКлавиатура создана в операционной системе Windows\n\t\t<br> Для переключения языка комбинация:\n\t\tлевыe ctrl + alt</p>'),new class{constructor(e){this.keyboardNode=e,this.textArea=document.querySelector(".text-area"),this.keys=document.querySelectorAll(".keyboard__key"),this.ruKeys=document.querySelectorAll(".ru"),this.enKeys=document.querySelectorAll(".en"),this.caseDownKeys=document.querySelectorAll(".caseDown"),this.caseUpKeys=document.querySelectorAll(".caseUp"),this.capsKeys=document.querySelectorAll(".caps"),this.shiftCapsKeys=document.querySelectorAll(".shiftCaps"),this.textAreaContent="",this.lang=localStorage.getItem("lang")?localStorage.getItem("lang"):"en","en"===this.lang?this.ruKeys.forEach((e=>e.classList.add("hidden"))):this.enKeys.forEach((e=>e.classList.add("hidden"))),this.state="caseDown",this.functionalKeys=["Space","Backspace","CapsLock","ShiftLeft","ShiftRight","Enter","Tab","Delete","MetaLeft","AltLeft","AltRight","ControlLeft","ControlRight","ArrowRight","ArrowLeft","ArrowDown","ArrowUp"]}addListeners(){this.keyboardNode.addEventListener("mousedown",(e=>{e.preventDefault();const t=e.target,s=t.closest(".keyboard__key");s&&this.keyboardAction("down",s,t)})),this.keyboardNode.addEventListener("mouseup",(e=>{const t=e.target.closest(".keyboard__key");t&&this.keyboardAction("up",t)})),document.addEventListener("keydown",(e=>{console.log(e),e.preventDefault();const t=document.getElementById(`${e.code}`);t.classList.add("active"),this.keyboardAction("down",t,t.querySelector(`.${this.lang} .${this.state}`),e)})),document.addEventListener("keyup",(e=>{const t=document.getElementById(`${e.code}`);t.classList.remove("active"),this.keyboardAction("up",t,t.querySelector(`.${this.lang} .${this.state}`))}))}keyboardAction(e,t,s,i){if("down"===e){let e=this.textArea.selectionStart;switch(t.id){case"Backspace":e-=1,this.textAreaContent=this.textAreaContent.replace(this.textAreaContent.slice(this.textArea.selectionStart-1,this.textArea.selectionStart),"");break;case"Delete":this.textAreaContent=this.textAreaContent.replace(this.textAreaContent.slice(this.textArea.selectionStart,this.textArea.selectionStart+1),"");break;case"Tab":this.textAreaContent+="\t";break;case"Enter":this.textAreaContent+="\n";break;case"CapsLock":this.caps();break;default:"caps"!==this.state||"ShiftRight"!==t.id&&"ShiftLeft"!==t.id?"caps"===this.state||"ShiftRight"!==t.id&&"ShiftLeft"!==t.id?"AltLeft"===t.id&&!0===i.ctrlKey||"ControlLeft"===t.id&&!0===i.altKey?this.changeLanguage():this.functionalKeys.includes(t.id)||(this.textAreaContent+=s.textContent,e=this.textAreaContent.length):this.shiftDown():this.shiftCaps()}this.textArea.textContent=this.textAreaContent,this.textArea.selectionStart=e}else"up"===e&&("ShiftRight"!==t.id&&"ShiftLeft"!==t.id||this.shiftUp())}changeLanguage(){"en"===this.lang?(this.enKeys.forEach((e=>e.classList.add("hidden"))),this.ruKeys.forEach((e=>e.classList.remove("hidden"))),this.lang="ru"):(this.enKeys.forEach((e=>e.classList.remove("hidden"))),this.ruKeys.forEach((e=>e.classList.add("hidden"))),this.lang="en"),localStorage.setItem("lang",this.lang)}offAllKeys(){this.caseDownKeys.forEach((e=>e.classList.add("hidden"))),this.caseUpKeys.forEach((e=>e.classList.add("hidden"))),this.capsKeys.forEach((e=>e.classList.add("hidden"))),this.shiftCapsKeys.forEach((e=>e.classList.add("hidden")))}shiftDown(){"shiftCaps"!==this.state&&(this.offAllKeys(),this.caseUpKeys.forEach((e=>e.classList.remove("hidden"))),this.state="caseUp")}shiftUp(){this.caseUpKeys.forEach((e=>e.classList.add("hidden"))),"shiftCaps"===this.state?(this.state="caps",this.capsKeys.forEach((e=>e.classList.remove("hidden"))),this.shiftCapsKeys.forEach((e=>e.classList.add("hidden")))):(this.caseDownKeys.forEach((e=>e.classList.remove("hidden"))),this.state="caseDown")}caps(){this.offAllKeys(),"caps"!==this.state?(this.capsKeys.forEach((e=>e.classList.remove("hidden"))),this.state="caps"):(this.state="caseDown",this.caseDownKeys.forEach((e=>e.classList.remove("hidden"))))}shiftCaps(){"shiftCaps"!==this.state&&(this.offAllKeys(),this.shiftCapsKeys.forEach((e=>e.classList.remove("hidden"))),this.state="shiftCaps")}}(document.querySelector(".keyboard")).addListeners()})();